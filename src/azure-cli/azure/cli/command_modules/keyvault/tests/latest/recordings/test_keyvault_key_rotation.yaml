interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002?api-version=2025-05-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002","name":"cli-test-kv-key-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-09-08T08:07:23.872Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-09-08T08:07:23.872Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"7b31ddc4-9101-4ef0-a387-79ce181cacdb","accessPolicies":[{"tenantId":"7b31ddc4-9101-4ef0-a387-79ce181cacdb","objectId":"cfd63e61-7aec-4d54-ba2c-394c6d10df25","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enabledForDiskEncryption":false,"enabledForTemplateDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"enableRbacAuthorization":false,"vaultUri":"https://cli-test-kv-key-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1101'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Sep 2025 08:08:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 2.2.317.0
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '3749'
      x-msedge-ref:
      - 'Ref A: A58B30BBA5FE4DDBAB86F227F7B082BF Ref B: MAA201060515017 Ref C: 2025-09-08T08:07:59Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault set-policy
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --object-id --key-permissions
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002?api-version=2025-05-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002","name":"cli-test-kv-key-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-09-08T08:07:23.872Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-09-08T08:07:23.872Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"7b31ddc4-9101-4ef0-a387-79ce181cacdb","accessPolicies":[{"tenantId":"7b31ddc4-9101-4ef0-a387-79ce181cacdb","objectId":"cfd63e61-7aec-4d54-ba2c-394c6d10df25","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enabledForDiskEncryption":false,"enabledForTemplateDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"enableRbacAuthorization":false,"vaultUri":"https://cli-test-kv-key-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1101'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Sep 2025 08:08:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 2.2.317.0
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '3749'
      x-msedge-ref:
      - 'Ref A: 3CAE6FA0471C4BD6A27BC59D57B09DAF Ref B: MAA201060516021 Ref C: 2025-09-08T08:08:01Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "7b31ddc4-9101-4ef0-a387-79ce181cacdb",
      "sku": {"family": "A", "name": "standard"}, "accessPolicies": [{"tenantId":
      "7b31ddc4-9101-4ef0-a387-79ce181cacdb", "objectId": "cfd63e61-7aec-4d54-ba2c-394c6d10df25",
      "permissions": {"keys": ["rotate", "all"], "secrets": ["all"], "certificates":
      ["all"], "storage": ["all"]}}], "vaultUri": "https://cli-test-kv-key-000002.vault.azure.net/",
      "enabledForDeployment": false, "enabledForDiskEncryption": false, "enabledForTemplateDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "enableRbacAuthorization":
      false, "provisioningState": "Succeeded", "publicNetworkAccess": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault set-policy
      Connection:
      - keep-alive
      Content-Length:
      - '710'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --object-id --key-permissions
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002?api-version=2025-05-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002","name":"cli-test-kv-key-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-09-08T08:07:23.872Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-09-08T08:08:03.512Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"7b31ddc4-9101-4ef0-a387-79ce181cacdb","accessPolicies":[{"tenantId":"7b31ddc4-9101-4ef0-a387-79ce181cacdb","objectId":"cfd63e61-7aec-4d54-ba2c-394c6d10df25","permissions":{"keys":["rotate","all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enabledForDiskEncryption":false,"enabledForTemplateDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"enableRbacAuthorization":false,"vaultUri":"https://cli-test-kv-key-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Sep 2025 08:08:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 2.2.317.0
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=cfd63e61-7aec-4d54-ba2c-394c6d10df25/southeastasia/1a1ecb05-5a86-4020-ba6e-fca300e76553
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '2999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '199'
      x-msedge-ref:
      - 'Ref A: AAE6F12D764D415283D2B3C0DF4B454E Ref B: MAA201060513009 Ref C: 2025-09-08T08:08:02Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      ParameterSetName:
      - --vault-name -n -p
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: POST
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/create?api-version=7.6-preview.2
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Sep 2025 08:08:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.microsoftonline.com/7b31ddc4-9101-4ef0-a387-79ce181cacdb",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.105;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2638.1
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"kty": "RSA", "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key create
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json
      ParameterSetName:
      - --vault-name -n -p
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: POST
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/create?api-version=7.6-preview.2
  response:
    body:
      string: '{"key":{"kid":"https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/f6732833e31548c2b2df60600d4a2599","kty":"RSA","key_ops":["encrypt","decrypt","sign","verify","wrapKey","unwrapKey"],"n":"wFYFOlQIb1HT7pG8x9exNDpm3XPlHcOvXVsCDAGWG1cMTvgprTFbUKB3FKjLUUA63uAXqIo2kgMnyi4z3wTB4AICOoWqRnjpbLFflUm9FlXiu-cc55Z0O9dQsrRNAubSZOIejwZ8vfxwedn9v_VkMfAeJJtSHXenQYXBof0mUam3elJ9aa7kQHbCW2mGj-biV7KwkKTOpW6JsCOjQv5dzSxJh4K2Oezxq25gQkTfeVw5a0laHHVyDg7r4G2vTxPVqMGGsjXWu7-hmBrbrwBXLHsbS7BEwZ1fQ7H14lGYyy2mSGRvfSbQvvPCZIEb7QmXEeOPhppzfcl9udAOVhukXQ","e":"AQAB"},"attributes":{"enabled":true,"created":1757318887,"updated":1757318887,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7,"exportable":false,"hsmPlatform":"0"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '734'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Sep 2025 08:08:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.105;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2638.1
    status:
      code: 200
      message: OK
- request:
    body: '{"lifetimeActions": [{"action": {"type": "Rotate"}, "trigger": {"timeAfterCreate":
      "P15D"}}, {"action": {"type": "Notify"}, "trigger": {"timeBeforeExpiry": "P7D"}}],
      "attributes": {"expiryTime": "P30D"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key rotation-policy update
      Connection:
      - keep-alive
      Content-Length:
      - '203'
      Content-Type:
      - application/json
      ParameterSetName:
      - --value --vault-name -n
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: PUT
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotationpolicy?api-version=7.6-preview.2
  response:
    body:
      string: '{"id":"https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotationpolicy","lifetimeActions":[{"trigger":{"timeAfterCreate":"P15D"},"action":{"type":"Rotate"}},{"trigger":{"timeBeforeExpiry":"P7D"},"action":{"type":"Notify"}}],"attributes":{"expiryTime":"P30D","created":1757318888,"updated":1757318888}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '315'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Sep 2025 08:08:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.105;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2638.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key rotation-policy show
      Connection:
      - keep-alive
      ParameterSetName:
      - --vault-name -n
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: GET
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotationpolicy?api-version=7.6-preview.2
  response:
    body:
      string: '{"id":"https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotationpolicy","lifetimeActions":[{"trigger":{"timeAfterCreate":"P15D"},"action":{"type":"Rotate"}},{"trigger":{"timeBeforeExpiry":"P7D"},"action":{"type":"Notify"}}],"attributes":{"expiryTime":"P30D","created":1757318888,"updated":1757318888}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '315'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Sep 2025 08:08:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.105;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2638.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key rotate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --vault-name -n
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: POST
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotate?api-version=7.6-preview.2
  response:
    body:
      string: '{"key":{"kid":"https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/13f07f9763f942b29220b243e6836346","kty":"RSA","key_ops":["encrypt","decrypt","sign","verify","wrapKey","unwrapKey"],"n":"tfyAfusrR-9W17JdQOoCMPXoBQwYmcPjTCAt4BznEmT1hC9CLNegbPvsaatqB1gJQEkXVTyNzzqPF9oakWjKhpGeWU-KPnNnjfSpYBskjPwg-KWvCw4wngQGMYG-pp2No1-E0zVKpgsKIadcuaPeVsP4j4EySakOZ7San7W89INOcNyIzenHLPGDnDcfyjIH9rouSRzNlSXbj7bGC4S9DrxQPA2LnDK24tnQqt23_IO7u_d2GJP_UYZN5kcuqm26T1vNN8eDx7IX05ceCn-u2NFIge7WiEUsvgA-2Ep1MPR4yrX6c0g4v-NyyxCzK43SeZxqJU8955T6mAm0BTvLHQ","e":"AQAB"},"attributes":{"enabled":true,"exp":1759910891,"created":1757318891,"updated":1757318891,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7,"exportable":false,"hsmPlatform":"0"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '751'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Sep 2025 08:08:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.105;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2638.1
    status:
      code: 200
      message: OK
version: 1
